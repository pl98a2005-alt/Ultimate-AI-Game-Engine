name: GENERATE_MASTER_ARCHITECT_APK
on: [push]

jobs:
  build_professional_app:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Build Architect Core and UI
        run: |
          # 1. Ù…Ø³Ø­ Ø£ÙŠ Ù…Ù„ÙØ§Øª Ù‚Ø¯ÙŠÙ…Ø© ØªØ³Ø¨Ø¨ ØªØ¹Ø§Ø±Ø¶ [cite: 2026-01-13]
          rm -f buildozer.spec
          
          # 2. Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ Ø§Ù„Ø£Ù†ÙŠÙ‚Ø©
          echo "
          from kivy.app import App
          from kivy.uix.boxlayout import BoxLayout
          from kivy.uix.textinput import TextInput
          from kivy.uix.button import Button
          from kivy.uix.label import Label
          from kivy.core.window import Window

          class ArchitectEngine(App):
              def build(self):
                  Window.clearcolor = (0, 0, 0, 1)
                  layout = BoxLayout(orientation='vertical', padding=30, spacing=15)
                  self.lbl = Label(text='ğŸ‘‘ Sovereign Architect AI', font_size='22sp', color=(0.8, 0.7, 0, 1))
                  self.chat_history = TextInput(text='Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ Ø¬Ø§Ù‡Ø² Ù„Ù„Ù†Ù‚Ø§Ø´... Ø§ØµÙ Ù„ÙŠ Ø¯Ù…Ø¬ Ø¨Ø¨Ø¬ÙŠ ÙˆÙƒÙˆØ¯', readonly=True, background_color=(0.1, 0.1, 0.1, 1), foreground_color=(1, 1, 1, 1))
                  self.user_input = TextInput(hint_text='Ø§ÙƒØªØ¨ Ø·Ù„Ø¨Ùƒ Ù‡Ù†Ø§...', multiline=False, size_hint=(1, 0.2))
                  btn_layout = BoxLayout(size_hint=(1, 0.15), spacing=10)
                  build_btn = Button(text='ØµÙ†Ø§Ø¹Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©', background_color=(0.5, 0.4, 0, 1))
                  clean_btn = Button(text='Clean-up', background_color=(0.3, 0.3, 0.3, 1))
                  layout.add_widget(self.lbl)
                  layout.add_widget(self.chat_history)
                  layout.add_widget(self.user_input)
                  btn_layout.add_widget(build_btn)
                  btn_layout.add_widget(clean_btn)
                  layout.add_widget(btn_layout)
                  return layout
          ArchitectEngine().run()
          " > main.py

          # 3. Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯ Ù…Ø¹ Ø­Ù„ Ù…Ø´ÙƒÙ„Ø© Ø§Ù„ØªØ¹Ø§Ø±Ø¶ [cite: 2026-01-11]
          pip install --user buildozer cython virtualenv
          export PATH=$PATH:$HOME/.local/bin
          buildozer init
          
          # ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ù‚ÙˆØ© ÙˆØ§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ©
          sed -i 's/title = .*/title = AI Architect/' buildozer.spec
          sed -i 's/package.name = .*/package.name = kings.ai.engine/' buildozer.spec
          sed -i 's/# android.permissions = .*/android.permissions = INTERNET, WRITE_EXTERNAL_STORAGE, READ_EXTERNAL_STORAGE/' buildozer.spec
          sed -i 's/requirements = .*/requirements = python3,kivy,sh/' buildozer.spec

          # 4. Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù€ APK Ø§Ù„ÙØ¹Ù„ÙŠ (Ø³ÙŠØ³ØªØºØ±Ù‚ ÙˆÙ‚Øª Ù„Ù„ØªØ­Ù…ÙŠÙ„ ÙˆØ§Ù„Ø·Ø¨Ø§Ø¹Ø©)
          buildozer -v android debug || true

      - name: Deliver Your APK Now
        uses: actions/upload-artifact@v4
        with:
          name: Sovereign-Architect-App-Final
          path: bin/*.apk
